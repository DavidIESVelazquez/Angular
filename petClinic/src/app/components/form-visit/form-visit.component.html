<div class="container">
  <h2>{{ accion }} Visit</h2>

  <div class="row" *ngIf="empty">
    <div class="col-12">
      <table class="table">
        <thead class="table-dark">
          <tr>
            <th>Pet</th>
            <th>Birth Date</th>
            <th>Type</th>
            <th>Owner</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ pet.name }}</td>
            <td>{{ pet.birthDate }}</td>
            <td>{{ pet.type.name }}</td>
            <td>{{ pet.owner.firstName }} {{ pet.owner.lastName }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="row mt-4">
    <div class="col-6">
      <form
        class="form-horizontal"
        #visitForm="ngForm"
        (ngSubmit)="onSubmit(visitForm.value)"
      >
        <div class="form-group">
          <label>Date</label>
          <input
            type="date"
            class="form-control"
            required
            [(ngModel)]="visit.visitDate"
            name="visitDate"
            #visitDate="ngModel"
          />
        </div>
        <div
          [hidden]="visitDate.valid || visitDate.pristine"
          class="alert alert-danger"
        >
          Date is required
        </div>
        <div class="form-group">
          <label>Description</label>
          <input
            type="description"
            class="form-control"
            required
            [(ngModel)]="visit.description"
            name="description"
            #description="ngModel"
          />
        </div>
        <div
          [hidden]="description.valid || description.pristine"
          class="alert alert-danger"
        >
          Description is required
        </div>
        <div class="mt-4">
          <button class="btn btn-success mx-2" [disabled]="!visitForm.valid">
            {{ accion }}
          </button>
          <button
            class="btn btn-danger"
            routerLink="/owners/{{ pet.owner_id }} "
          >
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>

  <div class="row mt-4" *ngIf="pet.visits">
    <div class="col-12">
      <app-visits [visits]="pet.visits"></app-visits>
    </div>
  </div>
</div>
